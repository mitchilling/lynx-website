<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@lynx-js/lynx-bundle-rslib-config](./lynx-bundle-rslib-config.md) &gt; [defineExternalBundleRslibConfig](./lynx-bundle-rslib-config.defineexternalbundlerslibconfig.md)

## defineExternalBundleRslibConfig() function

Get the rslib config for building Lynx external bundles.

**Signature:**

```typescript
export declare function defineExternalBundleRslibConfig(userLibConfig: ExternalBundleLibConfig, encodeOptions?: EncodeOptions): RslibConfig;
```

## Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  userLibConfig | ExternalBundleLibConfig |  |
|  encodeOptions | [EncodeOptions](./lynx-bundle-rslib-config.encodeoptions.md) | _(Optional)_ |

**Returns:**

RslibConfig

## Example 1

If you want to build an external bundle which use in Lynx background thread, you can use the following code:

```js
// rslib.config.js
import { defineExternalBundleRslibConfig, LAYERS } from '@lynx-js/lynx-bundle-rslib-config'

export default defineExternalBundleRslibConfig({
  id: 'utils-lib',
  source: {
    entry: {
      utils: {
        import: './src/utils.ts',
        layer: LAYERS.BACKGROUND,
      }
    }
  }
})
```
Then you can use `lynx.loadScript('utils', { bundleName: 'utils-lib-bundle-url' })` in background thread.

## Example 2

If you want to build an external bundle which use in Lynx main thread, you can use the following code:

```js
// rslib.config.js
import { defineExternalBundleRslibConfig, LAYERS } from '@lynx-js/lynx-bundle-rslib-config'

export default defineExternalBundleRslibConfig({
  id: 'utils-lib',
  source: {
    entry: {
      utils: {
        import: './src/utils.ts',
        layer: LAYERS.MAIN_THREAD,
      }
    }
  }
})
```
Then you can use `lynx.loadScript('utils', { bundleName: 'utils-lib-bundle-url' })` in main-thread.

## Example 3

If you want to build an external bundle which use both in Lynx main thread and background thread. You don't need to set the layer.

```js
// rslib.config.js
import { defineExternalBundleRslibConfig } from '@lynx-js/lynx-bundle-rslib-config'

export default defineExternalBundleRslibConfig({
  id: 'utils-lib',
  source: {
    entry: {
      utils: './src/utils.ts',
    },
  }
})
```
Then you can use `lynx.loadScript('utils', { bundleName: 'utils-lib-bundle-url' })` in background thread and `lynx.loadScript('utils__main-thread', { bundleName: 'utils-lib-bundle-url' })` in main-thread.

